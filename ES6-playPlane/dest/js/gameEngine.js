"use strict";var gameEngine={ele:null,allBullets:[],allEnemys:[],allScore:0,init:function(){return this.ele=document.getElementById("main"),this},start:function(){console.log("加载游戏"),this.loadding(function(){console.log("正式开始游戏！"),myPlane.init().move().listenKeybord(),myPlane.fire(),gameEngine.createEnemy(),gameEngine.crash()})},loadding:function(e){var n=document.createElement("div");n.className="logo",this.ele.appendChild(n);var l=document.createElement("div");l.className="load",this.ele.appendChild(l);var a=0,t=setInterval(function(){a>=7?(clearInterval(t),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e&&e()):l.style.background="url(images/loading"+ ++a%4+".png) no-repeat"},600)},createEnemy:function(){setInterval(function(){if(Math.random()>.3){new Enemy(1).init().fall()}},2e3),setInterval(function(){if(Math.random()>.5){new Enemy(2).init().fall()}},3e3),setInterval(function(){if(Math.random()>.6){new Enemy(3).init().fall()}},4e3)},crash:function(){this.timer=setInterval(function(){for(var e=0;e<gameEngine.allEnemys.length;e++){for(var n=0;n<gameEngine.allBullets.length;n++)isCrash(gameEngine.allBullets[n].ele,gameEngine.allEnemys[e].ele)&&(gameEngine.allBullets[n].boom(),gameEngine.allBullets.splice(n,1),gameEngine.allEnemys[e].hurt());if(isCrash(gameEngine.allEnemys[e].ele,myPlane.ele)){clearInterval(this.timer),myPlane.boom(function(){var e=prompt("请创建您的昵称，你的总分为： "+gameEngine.allScore,"admin");ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:e,score:gameEngine.allScore},success:function(e){alert("提交成功："+e),location.href="paihangbang.html"},fail:function(e){alert(e)}})});break}}},30)}};